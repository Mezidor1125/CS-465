// Lawrence Arundel CS 465

// Sources:
// Codepen, codepen. (2021, June 30). Draw an X in CSS (close sign) - codepen. codepen., from https://codepen.io/subin/pen/aEbvBP 
// Compart, C. (2022, March 3). Find all unicode characters from hieroglyphs to dingbats ‚Äì unicode compart. https://www.compart.com/en/unicode/U+27. Retrieved April 29, 2023, from https://www.compart.com/en/unicode/U+2753 
// Emoji Combos, E. C. (2022, February 14). Emoji Combosbeta. Emoji Combos., from https://emojicombos.com/ 
// Express, E. (2022, February 12). Cookie-parser. Express cookie-parser middleware., from https://expressjs.com/en/resources/middleware/cookie-parser.html 
// Express, E. (2022, February 12). Middleware Morgan., Middleware Morgan., from https://expressjs.com/en/resources/middleware/morgan.html
// Fitzgerald, A. (2022, July 14). HTML tables: When to use them and how to make &amp; edit them. HubSpot Blog., from https://blog.hubspot.com/website/make-a-table-in-html#:~:text=To%20make%20a%20table%20in%20HTML%2C%20use%20the,tag%20defines%20the%20table%20header. 
// Forret, P. (2021, April 3). HTML character: right arrow. HTML character: right arrow ¬∑ toolstud.io., from https://toolstud.io/web/charmap.php?encoded=larr 
// Forret, P. (2021, April 3). HTML character: left arrow. HTML character: left arrow ¬∑ toolstud.io., from https://toolstud.io/web/charmap.php?encoded=rarr
// GeeksForGeeks, G. F. G. (2023, March 16). Express.js res.render() function. GeeksforGeeks., from https://www.geeksforgeeks.org/express-js-res-render-function/ 
// GeeksForGeeks, G. F. G. (2023, March 16). Express.js express.Router() Function. GeeksforGeeks., from https://www.geeksforgeeks.org/express-js-express-router-function/
// Holmes, S., &amp; Harber, C. (2019). Getting mean with Mongo, express, angular, and node. Manning. 
// Hotsymbol, H. (2020, November 13). House copy and Paste - Hotsymbol. Hotsymbol., from https://www.hotsymbol.com/symbol/house 
// IconScout, I. S. (2022, March 3). Free user circle icon - download in Glyph style. IconScout., from https://iconscout.com/icon/user-circle-3609976 
// IconScout, I. S. (2022, March 3). Free Mail Icon - download in Glyph style. IconScout., from https://iconscout.com/icons/mail-icon?price=free
// IconScout, I. S. (2022, March 3). Free Message Icon - download in Glyph style. IconScout., from https://iconscout.com/icon/chat-bubble-4398305
// IconScout, I. S. (2022, March 3). Free Question Mark Icon - download in Glyph style. IconScout., from https://iconscout.com/icon/help-2653303
// Megida, D. (2022, April 25). Module.exports ‚Äì how to export in node.js and JavaScript. freeCodeCamp.org., from https://www.freecodecamp.org/news/module-exports-how-to-export-in-node-js-and-javascript/#:~:text=module.exports%20is%20an%20object,with%20the%20require%20global%20method. 
// MIT, M. I. T. (2021, October 19). # introduction. Handlebars., from https://handlebarsjs.com/guide/ 
// Mozilla, M. (2022, February 1). Express tutorial part 4: Routes and controllers - learn web development: MDN. Learn web development | MDN., from https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/routes 
// Mozilla, M. (2022, February 1). Express/Node introduction., Express/Node introduction., from https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/Introduction
// Mozilla, M. (2022, February 1). Element: getElementsByClassName() method., from https://developer.mozilla.org/en-US/docs/Web/API/Element/getElementsByClassName
// Mozilla, M. (2022, February 1). Background., from https://developer.mozilla.org/en-US/docs/Web/HTML/Viewport_meta_tag
// NPM, N. P. M. (2022, May 11). HTTP-errors. npm., from https://www.npmjs.com/package/http-errors 
// Philiapp, P. (2022, February 2). X mark letters. X mark symbols - ‚úñ., from https://www.piliapp.com/symbol/x-mark/ 
// Phuoc, N. H. (2021, September 4). Loop over a nodelist - HTML dom. 1LOC., from https://htmldom.dev/loop-over-a-nodelist/ 
// Sam, B. (2022, July 22). How to highlight-change color of selected row in table. OutSystems., from https://www.outsystems.com/forums/discussion/80134/how-to-highlight-change-color-of-selected-row-in-table/ 
// Scherer, M. (2023, April 3). üîçÔ∏é (text style) magnifying glass tilted left : U+1F50D fe0e unicode information. EmojiAll., from https://www.emojiall.com/en/code/1F50D-FE0E 
// SNHU, S. N. H. U. (2023, May 1). CS 465 Full Stack Guide., from https://learn.snhu.edu/d2l/home 
// SNHU, S. N. H. U. (2023, May 1). CS 465 Travlr Getaways Wireframe., from https://learn.snhu.edu/content/enforced/1313027-CS-465-T5558-OL-TRAD-UG.23EW5/course_documents/CS%20465%20Travlr%20Getaways%20Wireframe.pdf?ou=1313027
// SNHU Media, S. N. H. U. M. (2020, March 3). CS 465: MVC Routing. YouTube., from https://www.youtube.com/watch?v=aNIrBEpc1cM&amp;ab_channel=SNHUMedia 
// SNHU Media, S. N. H. U. M. (2020, March 3). CS 465: Dynamic view rendering. YouTube., from https://www.youtube.com/watch?v=vXr5FVuVAyg&amp;ab_channel=SNHUMedia 
// Softel, S. (2021, March 5). Simple Image Placeholder Service. Placeholder Service., from https://placehold.jp/en.html 
// W3Schools, W. S. (2021, May 4). How to - tabs. How To Create Tabs., from https://www.w3schools.com/howto/howto_js_tabs.asp 
// W3Schools, W. S. (2021, May 4). JavaScript HTML DOM EventListener., from https://www.w3schools.com/js/js_htmldom_eventlistener.asp#:~:text=The%20addEventListener()%20method%20attaches,event%20handlers%20to%20one%20element.
// W3Schools, W. S. (2021, May 4). GetElementByID()., from https://www.w3schools.com/jsref/met_document_getelementbyid.asp#:~:text=Definition%20and%20Usage,or%20edit%20an%20HTML%20element.
// W3Schools, W. S. (2021, May 4). HTML DOM Document querySelectorAll()., from https://www.w3schools.com/jsref/met_document_queryselectorall.asp#:~:text=Definition%20and%20Usage,the%20selector(s)%20is%20invalid
// W3Schools, W. S. (2021, May 4). HTML DOM Element classList., from https://www.w3schools.com/jsref/prop_element_classlist.asp
// W3Schools, W. S. (2021, May 4). Style display Property., from https://www.w3schools.com/jsref/prop_style_display.asp
// W3Schools, W. S. (2021, May 4). HTML DOM Element className., from https://www.w3schools.com/jsref/prop_html_classname.asp
// W3Schools, W. S. (2021, May 4). JavaScript Window Location., from https://www.w3schools.com/js/js_window_location.asp
// W3Schools, W. S. (2021, May 4). stopPropagation() Event Method., from https://www.w3schools.com/jsref/event_stoppropagation.asp#:~:text=Definition%20and%20Usage,capturing%20down%20to%20child%20elements.

// function used to select the table by element depending on the tab presented (W3Schools, 2022, p. 1)
function addTableListeners(projectTables) {

  // retrieves all rows of the table parameter using the get elements by tag name function (Mozilla, 2022, p. 1)
  var tableRows = projectTables.getElementsByTagName("tr");

  // loop which iterates through every row of the table, starting with the index 1. The first row is overlooked due to that being the header of the table (W3Schools, 2022, p. 1)
  for (var i = 1; i < tableRows.length; i++) {

    // attachs a click event listener to each row of the table to utilize the highlighting feature within the table , which executes when the user clicks on
    // the specified row in table (W3Schools, 2022, p. 1)
    tableRows[i].addEventListener("click", function () {

      // current table variables which equals the selected row from the selected table. The getElementsByClassName  method returns a live HTMLCollection which
      // contains every descendant element given the specified class name or names within the provided table (Mozilla, 2022, p. 1)
      var currentTable = projectTables.getElementsByClassName("selected-table");

      // condition that states if the current table's length is greater than zero, then remove that specified table meaning unselect the highlighted row if selecting
      // a different row if or when moving to a different tab/table entirely (W3School, 2022, p. 1) 
      if (currentTable.length > 0) {
        currentTable[0].className = currentTable[0].className.replace("selected-table", "");
      }

      // add the selected-table class to the clicked row and appropriately act upon the row which the user has clicked to highlight selected row (W3Schools, 2022, p. 1)
      this.className += "selected-table";
    });
  }

  // adds an event listener to the HTML document in the browser window, which is the travel.hbs webpage or localhost:3000/travel (W3Schools, 2022, p. 1)
  document.addEventListener("click", function (elementClicked) {

    // condition that states if the clicked element is not a part of the table, then remove the selected-table calss from all rows of the table
    // excluding the first row or header row within the application (SNHU, 2023, p. 1);((W3Schools, 2022, p. 1)
    if (!projectTables.contains(elementClicked.target)) {

      // for loop which begins at index 1 that iterates through the row of table and removes the highlight around the row if any are applicable
      // (Sam, 2022, p. 1);(W3Schools, 2022, p. 1)
      for (var i = 1; i < tableRows.length; i++) {
        tableRows[i].classList.remove("selected-table");
      }
    }
  });
}

// utilizes the getElementById method to obtain reference to HTML element with the ID beaches-table and stores it into the variable beaches_table (W3Schools, 2022, p. 1)
var beaches_table = document.getElementById("beaches-table");

// utilizes the getElementById method to obtain reference to HTML element with the ID mountains-table and stores it into the variable mountains_table (W3Schools, 2022, p. 1)
var mountains_table = document.getElementById("mountains-table");

// utilizes the getElementById method to obtain reference to HTML element with the ID cruises-table and stores it into the variable cruises_table (W3Schools, 2022, p. 1)
var cruises_table = document.getElementById("cruises-table");

// funciton call to the addTableListeners function to locate the required funcitonality for the table to properly implementing highlighting/showcasing of table based on 
// selected row (SNHU, 2023, p. 1);(W3Schools, 2022, p. 1)
addTableListeners(beaches_table);

// funciton call to the addTableListeners function to locate the required funcitonality for the table to properly implementing highlighting/showcasing of table based on 
// selected row (SNHU, 2023, p. 1);(W3Schools, 2022, p. 1)
addTableListeners(mountains_table);

// funciton call to the addTableListeners function to locate the required funcitonality for the table to properly implementing highlighting/showcasing of table based on 
// selected row (SNHU, 2023, p. 1);(W3Schools, 2022, p. 1)
addTableListeners(cruises_table);

// declare selected row variable as null (SNHU, 2023, p. 1)
var selectedRow = null;

// variable project tables used to create the list of table elements from the HTML project to be used for future functionality 
// querySelectorAll returns all elements that match the CSS selector which includes the table tag for the statement provided (SNHU, 2023, p. 1);(W3Schools, 2022, p. 1)
const projectTables = document.querySelectorAll('table');

// variable table rows which is initialied by the querySelectorAll function which returns all tr tags within the HTML document (W3Schools, 2022, p. 1)
const tableRows = document.querySelectorAll('tr');

// forEach loops that is utilized to iterate over each table row within the tableRows list (Phuoc, 2022, p. 1);(W3Schools, 2022, p. 1) 
tableRows.forEach(eachTableRow => {

  // adds an event listener to each of the table rows for a user click event (W3Schools, 2022, p. 1)
  eachTableRow.addEventListener('click', (eventObject) => {

    // clicked row variable is set to the eventObject.currentTarget or the row in which the user has selected is returned to the clicked row variable (W3Schools, 2022, p. 1)
    const clickedRow = eventObject.currentTarget;

    // condition that states if the row is currently selected and the clicked row variable does not equate to the selected row, then remove the salmon color highlight
    // for that specified row meaning user has clicked off of the table and the salmon color will be removed from that specified row when condition is satisified 
    // (W3Schools, 2022, p. 1)
    if (selectedRow && selectedRow !== clickedRow) {
      selectedRow.classList.remove('salmon');
    }

    // user selecting row that is not currently highlighted will cause the row to become highlighted with the .toggle command (W3Schools, 2022, p. 1)
    clickedRow.classList.toggle('salmon');

    // update the selected row variable with the clicked row variable to continue listening to the select table and rows presented within the HTML document (SNHU, 2023, p. 1);(W3Schools, 2022, p. 1)
    selectedRow = clickedRow;
  });
});

// creates a click event listener for the HTML document to check whether the user clicks off of the table, and if so, appropriately function the removal of the
// salmon class list for the selected row variable which corresponds to the row in the table which is selected (W3Schools, 2022, p. 1)
document.addEventListener('click', (eventObject) => {

  // set the clickInside variable equal to the matching information in the different table sets whichever is true (W3Schools, 2022, p. 1)
  const isClickInside = projectTables[0].contains(eventObject.target) || projectTables[1].contains(eventObject.target) || projectTables[2].contains(eventObject.target);

  // condition that states if the click event occurred outside of the table and there is a row that is currently selected, then
  // remove the highlight color for that selected row and set the selected row variable equal to null to deselect the row entirely (W3School, 2022, p. 1)
  if (!isClickInside && selectedRow) {
    selectedRow.classList.remove('salmon');
    selectedRow = null;
  }
});

// function that decides which table to populate based on the event object and table name provided by the user (SNHU, 2023, p. 1)(W3School, 2022, p. 1)
function openTable(eventObject, tableName) {

  // variable i used within the function to iterate through the different table content (SNHU, 2023, p. 1)
  var i;

  // variable tableContent used to store the information to provide within the view for the table based on user selection (SNHU, 2023, p. 1)
  var tableContent;

  // variable tableTravel used to select which tab is activated by the user based on the beaches, cruises, or mountains tab (SNHU, 2023, p. 1)
  var tableTravel;

  // stores list of information with the class table-content to the tableContent variable (W3Schools, 2023, p. 1)
  tableContent = document.getElementsByClassName("table-content");

  // iterate through the tableContent element and set the display CSS property to none which hides all the tables in the page to start (W3School, 2022, p. 1)
  for (i = 0; i < tableContent.length; i++) {
    tableContent[i].style.display = "none";
  }

  // retrieves all of the HTML elements which have the class of table-travel and stores them into the tableTravel variable (W3School, 2022, p. 1)
  tableTravel = document.getElementsByClassName("table-travel");

  // iterate through the tableTravel variable and removes the active class from the class name property which removes the active style from
  // the table links within the application 
  for (i = 0; i < tableTravel.length; i++) {
    tableTravel[i].className = tableTravel[i].className.replace("active", "");
  }

  // adds the active class to the clicked table link by adding it to the className property of the current target element within the application 
  // by implementing the eventObject, it creates the active property which assists with highlighting the tabs for the table displays (W3Schools, 2022, p. 1)
  eventObject.currentTarget.className += " active";

  // condition that checks the table name based on the selection by the user and which is passed to the function, it will display the corresponding table
  // by setting the display CSS property to "table", that way it only selects the selected table in the page (W3Schools, 2022, p. 1)
  if (tableName === "Beaches") {
    document.getElementById("beaches-table").style.display = "table";
  } else if (tableName === "Cruises") {
    document.getElementById("cruises-table").style.display = "table";
  }
  else if (tableName === "Mountains") {
    document.getElementById("mountains-table").style.display = "table";

    // variable used to display the tab contents within the application (SNHU, 2023, p. 1)
    var tabContents;

    // variable used to project the contents of the tabs within the application (SNHU, 2023, p. 1)
    var projectTabs;

    // sets the elements with the class tabcontent to the tabContents variable (SNHU, 2023, p. 1)
    tabContents = document.getElementsByClassName("tabcontent");

    // iterate through the elemn==ents with the class tabcontent and set the display to none which hides the tables within the application (SNHU, 2023, p. 1);(W3Schools, 2022, p. 1)
    for (i = 0; i < tabContents.length; i++) {
      tabContents[i].style.display = "none";
    }

    // sets the elements with the table-travel class to the projectTabs variable (SNHU, 2023, p. 1);(W3Schools, 2022, p. 1)
    projectTabs = document.getElementsByClassName("table-travel");

    // iterates through the elements with the class table-travel and remove the active from the className property based on user selection (W3Schools, 2023, p. 1)
    for (i = 0; i < projectTabs.length; i++) {
      projectTabs[i].className = projectTabs[i].className.replace(" active", "");
    }

    // sets the display style property to block which will show the table based on user selection (SNHU, 2023, p. 1)
    document.getElementById(tableName).style.display = "block";

    // adds the active class to the clicked attribute's className property based on user selection (SNHU, 2023, p. 1)
    this.className += "active";

    // the statement assigns the elements with the class tabcontent to the tabContents variable and then iterates through the elements with the class
    // tabcontent which adds hidden to their classList property which hides them if they are not selected by user meaning the selected tab (SNHU, 2023, p. 1);(W3School, 2023, p. 1)
    tabContents = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabContents.length; i++) {
      tabContents[i].classList.add("hidden");
    }

    // assigns all the elements with the class table-travel to the projectTabs variable and iterates through the elements with the class table-travel to remove the class
    // active from their classList property effectively (SNHU, 2023, p. 1);(W3School, 2023, p. 1)
    projectTabs = document.getElementsByClassName("table-travel");
    for (i = 0; i < projectTabs.length; i++) {
      projectTabs[i].classList.remove("active");
    }

    // the class list property of the element with the ID specified by the table name which is done to remove the hidden class, which shows that specified table (SNHU, 2023, p. 1)
    document.getElementById(tableName).classList.remove("hidden");

    // statement which adds the active class to the selected element's class list property (W3School, 2022, p. 1)
    this.classList.add("active");
  }
}

// function used to navigate to the various webpages within the application utilizing the event object and the website url (SNHU, 2023, p. 1)
function navigateToLink(eventObject, websiteURL) {

  // method that cancels the event if it is cancelable, meaning that the action will not occur and prevent further propagation of an event
  // through the DOM (W3Schools, 2022, p. 1)
  eventObject.preventDefault();

  // obtain the value of the input field with the ID websiteURL and trim the value for consistency within the application (W3Schools, 2022, p. 1)
  const websiteValue = (document.getElementById(websiteURL)).value.trim();

  // condition that states if the website value variable starts with the website specified or starts with the website specified ending in /travel, 
  // execute window.location.href and set it equal to /travel (W3School, 2022, p. 1)
  if (websiteValue.toLowerCase().startsWith("https://travlr.com/travel") || websiteValue.toLowerCase().startsWith("travlr.com/travel")) {
    window.location.href = "/travel";
  }

  // condition that states if the website value variable starts with the website specified or starts with the website specified ending in /admin, 
  // execute window.location.href and set it equal to /admin (W3School, 2022, p. 1)
  else if (websiteValue.toLowerCase().startsWith("https://travlr.com/admin") || websiteValue.toLowerCase().startsWith("travlr.com/admin")) {
    window.location.href = "/admin";
  }

  // condition that states if the website value variable starts with the website specified or starts with the website specified ending in /signup, 
  // execute window.location.href and set it equal to /signup (W3School, 2022, p. 1)
  else if (websiteValue.toLowerCase().startsWith("https://travlr.com/signup") || websiteValue.toLowerCase().startsWith("travlr.com/signup")) {
    window.location.href = "/signup";
  }

  // condition that states if the website value variable starts with the website specified or starts with the website specified ending in /reservations, 
  // execute window.location.href and set it equal to /reservations (W3School, 2022, p. 1)
  else if (websiteValue.toLowerCase().startsWith("https://travlr.com/reservations") || websiteValue.toLowerCase().startsWith("travlr.com/reservations")) {
    window.location.href = "/reservations";
  }

  // condition that states if the website value variable starts with the website specified or starts with the website specified ending in /news, 
  // execute window.location.href and set it equal to /news (W3School, 2022, p. 1)
  else if (websiteValue.toLowerCase().startsWith("https://travlr.com/news") || websiteValue.toLowerCase().startsWith("travlr.com/news")) {
    window.location.href = "/news";
  }

  // condition that states if the website value variable starts with the website specified or starts with the website specified ending in /login, 
  // execute window.location.href and set it equal to /login (W3School, 2022, p. 1)
  else if (websiteValue.toLowerCase().startsWith("https://travlr.com/login") || websiteValue.toLowerCase().startsWith("travlr.com/login")) {
    window.location.href = "/login";
  }

  // condition that states if the website value variable starts with the website specified or starts with the website specified ending in /checkout, 
  // execute window.location.href and set it equal to /checkout (W3School, 2022, p. 1)
  else if (websiteValue.toLowerCase().startsWith("https://travlr.com/checkout") || websiteValue.toLowerCase().startsWith("travlr.com/checkout")) {
    window.location.href = "/checkout";
  }

  // set the window location equalk to /users (W3Schools, 2022, p. 1)
  else {
    window.location.href = "/users";
  }
}

// function used to navigate to the sign up page (W3Schools, 2022, p. 1)
function goSignUp() {
  window.location.href = "/signup";
}

// function used to navigate to the travel page (W3Schools, 2022, p. 1)
function goTravelScreen() {
  window.location.href = "/travel";
}

// function used to navigate one screen previous (W3Schools, 2022, p. 1)
function goBackPage() {
  window.history.back();
}

// function used to navigate one screen forward (W3Schools, 2022, p. 1)
function goForwardPage() {
  window.history.forward();
}

// function used to reload page (W3Schools, 2022, p. 1)
function stopProcess() {
  window.location.reload();
}

// function used to navigate to the home screen or home page (W3Schools, 2022, p. 1)
function goHomeScreen() {
  window.location.href = "/"
}











